<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Money Bowl</title>
    <link rel="stylesheet" href="amortizationStyle.css">

    <link rel="icon" href="./Img/redmoneybowl-32.ico" type="image/ico">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script><!-- for Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.1/xlsx.full.min.js"></script><!-- Sheet.js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script> <!--FileSaver.js-->




</head>

<body>
    <nav>
        <div class="logo">
            <img src="../Img/redmoneybowl" alt="project logo">
            <a href="../Landing Page/index.html">The Money Bowl</a>
        </div>
        <div class="nav-items">
            <a href="../Landing Page/index.html">Home</a>
            <a href="/">About</a>
            <a href="/">Contact</a>
        </div>
    </nav>
    <section id="mortgage-calculator">
        <div class="container"> <!--This is where grid starts-->
            <div>
                <!-- empty to format  -->
            </div>
            <div>
                <h1>Mortgage Calculator</h1>
            </div>
            <div class="nextBox">
                <div class="calculator">
                    <div id="app" class="m-calculator">
                        <p>box 2</p>
                        <label for="homePrice" class="formLabel-left">Principal Amount</label>

                        <div class="inputBoxIcon">
                            <span class="inputBoxIcon-dollar">$</span>
                            <input type="text" id="regBox" class="formInput" name="principal"
                                placeholder="Enter Principal Amount" value="425000" oninput="calcDown()" required>
                            <!-- whenever user input, calcDown() is called to autofill downpayment -->
                        </div>



                        <label for="downPayment" class="formLabel-left">Down Payment</label>
                        <!-- <div class="splitBox"> -->
                        <div class="inputBoxIcon">
                            <span class="inputBoxIcon-dollar">$</span>
                            <div class="downPayment-amount">
                                <input type="text" id="downPayment-amount" class="formInput" name="down"
                                    placeholder="100,000" value="85000" required oninput="calcDownPercent()">
                            </div>

                            <div class="downPayment-percent">
                                <input type="text" id="downPayment-percent" class="formInput" placeholder="20"
                                    value="20" oninput="calcDown()">
                                <!-- whenever user input, calcDown() is called to autofill downpayment -->
                            </div>
                            <span class="inputBoxIcon-percent">%</span>
                        </div>

                        <!-- </div> -->
                        <label for="term" class="formLabel-left">Loan Term</label>
                        <div class="regBox">
                            <select id="regBox" class="formInput" name="term" required>
                                <option value="30">30 years</option>
                                <option value="25">25 years</option>
                                <option value="20">20 years</option>
                                <option value="15">15 years</option>
                                <option value="10">10 years</option>
                                <option value="5">5 years</option>
                            </select>
                        </div>
                        <label for="interest" class="formLabel-left">Interest Rate</label>

                        <div class="inputBoxIcon">
                            <span class="inputBoxIcon-percent">%</span>

                            <input type="text" id="regBox" class="formInput" name="interest" placeholder="6.12345%"
                                value="6.25" required>

                        </div>



                    </div>
                    <input type="button" id="eval" value="Calculate Your Mortgage!!!!" onclick="getInputs()"
                        class="evalButton">
                </div>
            </div>
            <div class="amortSchedule-container">
                <div class="amortSnippet">
                    <div class="amortSnippet-1">
                        <label for="summary">Loan Summary</label>
                        <div class="table-head" id="amortHead"></div>
                    </div>
                    <div class="AmortSnippet-2">
                        <label for="breakdown">Payment Breakdown</label>
                        <div class="table-head" id="amortInterest"></div>
                    </div>
                </div>

                <div>
                    <label for="graph">Graph</label>
                    <canvas id="amortChart"></canvas>
                </div>
                <div>
                    <label for="schedule">Amortization Schedule <button id="export-btn" onclick="convert_xlsx()"> <img src="/Img/download-button-svgrepo-com (1).svg" style="height:25px; width:25px;"></button></label>
                    <div class="table-container" id="amortTable">
                    </div>
                    
                </div>


            </div>


    </section>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js"></script> -->


    <!-- <script>
    const ctx = document.getElementById("amortChart").getContext("2d");
// Clear the previous chart instance if it exists
    // if(window.amortizationChart){
    //     window.amortizationChart.destroy();
    // }

// Create a new chart and store it in window.amortizationChart
  window.amortizationChart = new Chart(ctx,{
      type: "line",
      data: {
        labels: month,
        datasets: [
          {
            label: "Interest Paid",
            data: interest,
            borderColor: "rgba(255, 99, 132, 1)",
            backgroundColor: "rgba(255, 99, 132, 0.2)",
            fill: false,
            borderWidth: 2,
          },
          {
            label: "Principal Paid",
            data: principal,
            borderColor: "rgba(54, 162, 235, 1)",
            backgroundColor: "rgba(54, 162, 235, 0.2)",
            fill: false,
            borderWidth: 2,
          },
        ],
      },
      options:{
        scales:{
            x:{
                title:{
                    display:true,
                    text: "Month"
                }
            }
        },
        y:{
            title:{
                display:true,
                text:"Amount Paid (USD)"
            }
        }
      },
      responsive:true,
      plugins:{
        legend:{
            position:"top"
        },
        title:{
            display:true,
            text:"Amortization: Interest v. Principal Paid Over Time"
        }
      }
    }
  );
</script> -->

    <script src="amortization.js"></script>
</body>

</html>
